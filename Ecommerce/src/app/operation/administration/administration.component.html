<div class="container">
<h3>Administration</h3>

<button mat-raised-button color="accent" class="float:end" *ngIf="!display" (click)="displayAddForm()"><mat-icon>add</mat-icon></button>
<button mat-raised-button color="accent" *ngIf="display" (click)="hideAddForm()"><mat-icon>remove</mat-icon></button>

<div class="containers" [hidden]="!display">
    <form [formGroup]="addform" (ngSubmit)="submit()">
        <h4>Ajouter Produit</h4>
        <mat-grid-list cols="2" rowHeight="85px">
            <mat-grid-tile colspan="2">
                <input type="file" required formControlName="photo" class="form-control" name="photo" formenctype="multipart/form-data">

            </mat-grid-tile>
           <mat-grid-tile>
                <mat-form-field appearance="fill">
                    <mat-label>Nom</mat-label>
                    <input matInput type="text" name="name" formControlName="name">
                </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
                <mat-form-field appearance="fill">
                    <mat-label>Prix</mat-label>
                    <input matInput type="number" name="prix" formControlName="prix">
                </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
           <!-- 
                <mat-form-field appearance="fill">
                    <mat-label>Allergène</mat-label>
                    <mat-select [formControl]="toppings" multiple  formControlName="allergene">
                        <mat-select-trigger>
                            {{toppings.value?.[0] || ''}}
                            <span *ngIf="(toppings.value?.length || 0) > 1" class="example-additional-selection">
                                (+{{(toppings.value?.length || 0) - 1}} {{toppings.value?.length === 2 ? 'other' :
                                'others'}})
                            </span>
                        </mat-select-trigger>
                        <mat-option *ngFor="let topping of toppingList" [value]="topping">{{topping}}</mat-option>
                    </mat-select>
                </mat-form-field>
           
        -->
        <mat-form-field appearance="fill">
            <mat-label>Allergène</mat-label>
            <mat-select  multiple formControlName="allergene">
              <mat-option *ngFor="let element of allergeneList" [value]="element" >{{element}}</mat-option>
            </mat-select>           
          </mat-form-field>
        </mat-grid-tile>
        <!--<p>Allergène: {{selected}}</p>-->
        
             <mat-grid-tile>
                <mat-form-field appearance="fill">
                    <mat-label>Favori</mat-label>
                    <mat-select name="favori" formControlName="favori" name="favori">
                        <mat-option value="oui">Oui</mat-option>
                        <mat-option value="non">Non</mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
                <mat-form-field appearance="fill">
                    <mat-label>Catégorie</mat-label>
                    <mat-select formControlName="categorie" name="categorie">
                        <mat-option *ngFor="let categorie of listCategorie; let i=index" [value]="categorie.name">
                            {{categorie.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
                <mat-form-field appearance="fill">
                    <mat-label>Discount</mat-label>
                    <input matInput type="number" name="discount" formControlName="discount">
                </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="2">
                <mat-form-field appearance="fill">
                    <mat-label>Description</mat-label>
                    <textarea matInput #message maxlength="80" placeholder="Ex. Savoureux..."
                        formControlName="description" name="description"></textarea>
                    <mat-hint align="end">{{message.value.length}} / 80</mat-hint>
                </mat-form-field>
            </mat-grid-tile>
        </mat-grid-list>
        <button mat-raised-button color="warn" class="btnsubmit" [disabled]="addform.invalid">
           Ajouter un produit
        </button>
    </form>
</div>

<mat-divider></mat-divider>

<app-table-data></app-table-data>
</div>